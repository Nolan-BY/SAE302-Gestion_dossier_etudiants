#:kivy 2.1

#Création de toutes les fenêtres qui seront utilisées
WindowManager:
    Login:
    NavigProf:
    Liste:
    Trombi:
    Add:
    StudentView:


<PopUpMoy>:
    name: "PopUpMoy"
    title: "Modifier une moyenne"

    BoxLayout:
        orientation: "vertical"
        cols: 1
        spacing: root.height/20

        TextInput:
            id: new_moy
            hint_text: "Nouvelle moyenne"
            multiline: False
            size_hint: (.7, None)
            height: root.height/10
            font_size: root.width/20
            pos_hint: {'center_x':.5, 'center_y':.45}
            halign: 'center'
            valign: 'center'
        
        Button:
            text: "Envoyer !"
            font_size: root.width/24
            background_color: 39/255, 189/255, 245/255, .42
            size_hint: (.35, None)
            height: root.height/18
            pos_hint: {'center_x':.5, 'center_y':.15}
            canvas.before:
                Color:
                    rgba: self.background_color
                RoundedRectangle:
                    size: self.size
                    pos: self.pos
            on_release: app.root.current = "NavigProf"


<StudList>:
    GridLayout:
        cols: 7
        id: stud_list
        spacing: root.width/20
        padding: [root.width/25, 0, 0, 0]
        canvas.before:
            Color:
                rgba: 199/255, 199/255, 199/255, .58
            Rectangle:
                size: self.size
                pos: self.pos
            
        Label:
            id: stud_list_surname
            text: "Quentin"
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/10

        Label:
            id: stud_list_name
            text: "DELCHIAPPO"
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/6
        
        Label:
            id: stud_list_title_age
            text: "21"
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/20

        Label:
            id: stud_list_title_year
            text: "2A"
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/50
        
        Label:
            id: stud_list_title_subject
            text: "Physique"
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/7
        
        Label:
            id: stud_list_title_moy
            text: "17.3"
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/50
        
        Image:
            id: stud_list_title_picture
            source: "assets/snap.jpg"
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/9
            allow_stretch: True


#Fenêtre de login, avec la connexion du prof    
<Login>:
    name: "Login"

    BoxLayout:
        cols: 6
        orientation: "vertical"
        spacing: root.height/30

        Label:
            text: "BIENVENUE SUR LE SITE DE :"
            background_color: (26, 82, 118, 1)
            font_size: root.width/24
            pos_hint: {'center_x':.5, 'center_y':1}
            background_color: 39/255, 189/255, 245/255, .42
            color: (5/255, 5/255, 5/255, 1)
            canvas.before:
                Color:
                    rgba: self.background_color
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

        Image:
            source: "assets/rt.png"

        BoxLayout:
            orientation: "vertical"
            cols: 1

            Label:
                text: "Identifiez vous"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                size_hint: (.6, None)
                height: root.height/18
                pos_hint: {'center_x':.5, 'center_y':.95}
                background_color: 39/255, 189/255, 245/255, .42
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [20]
        
        # BoxLayout:
        #     orientation: "vertical"
        #     cols: 1
            # Label:
            #     text: "Identifiant"
            #     color: (5/255, 5/255, 5/255, 1)
            #     font_size: root.width/24
            #     size_hint: (.5, .3)
            #     pos_hint: {'center_x':.5, 'center_y':.3}

        TextInput:
            id: connect_login
            hint_text: "Identifiant"
            multiline: False
            size_hint: (.7, None)
            height: root.height/18
            font_size: root.width/24
            pos_hint: {'center_x':.5, 'center_y':.4, 'top' : .05}
            halign: 'center'
            valign: 'middle'
        
        # BoxLayout:
        #     orientation: "vertical"
        #     cols: 1

            # Label:
            #     text: "Mot de passe"
            #     color: (5/255, 5/255, 5/255, 1)
            #     font_size: root.width/24
            #     size_hint: (.5, .3)
            #     pos_hint: {'center_x':.5, 'center_y':.45}

        TextInput:
            id: connect_mdp
            hint_text: "Mot de passe"
            multiline: False
            password: True
            password_mask: "*"
            size_hint: (.7, None)
            height: root.height/18
            font_size: root.width/24
            pos_hint: {'center_x':.5, 'center_y':.45, 'top' : .05}
            halign: 'center'
            valign: 'center'

        BoxLayout:
            orientation: "vertical"
            cols: 1
            padding: [0, 0, 0, root.height/25]
            
            Button:
                text: "Connexion !"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.35, None)
                height: root.height/18
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                on_release: app.root.current = "NavigProf"


#Fenêtre de navigation, permet de choisir quels options choisir   
<NavigProf>:

    name: "NavigProf"

    BoxLayout:
        cols: 6
        orientation: "vertical"
        spacing: root.height/20

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]

                Button:
                    text: "Logout"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "Login"

                Label:
                    text: "Vers où naviguer ?"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/7

            Image:
                source: "assets/rt.png"

        BoxLayout:
            orientation: "vertical"
            cols: 1
            spacing: root.height/20
            padding: [0, 0, 0, root.height/10]

            Button:
                text: "Liste des étudiants"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.55, None)
                height: root.height/10
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos 
                on_release: app.root.current = "Liste"
            
            Button:
                text: "Trombinoscope"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.55, None)
                height: root.height/10
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos 
                on_release: app.root.current = "Trombi"
            
            Button:
                text: "Ajouter un étudiant"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.55, None)
                height: root.height/10
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos 
                on_release: app.root.current = "Add"
            
            Button:
                text: "Voir/Modifier un étudiant"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.55, None)
                height: root.height/10
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos 
                on_release: app.root.current = "StudentView"


#Fenêtre qui permet de gérer la liste des photos des étudiants
<Trombi>:
    name: "Trombi"

    BoxLayout:
        cols: 6
        orientation: "vertical"
        spacing: root.height/30

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]
                size_hint: (1, None)
                height: root.height/15

                Button:
                    text: "Retour"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "NavigProf"

                Label:
                    text: "Trombinoscope"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}
            
        BoxLayout:
            orientation:"horizontal"
            cols: 2
            spacing: root.width/20
            size_hint: (1, None)
            height: root.height/40
            padding: [root.width/35, 0, 0, 0]

            Spinner:
                id: list_sort_by
                text: "Trier par"
                font_size: root.width/24
                values: ["1A", "2A", "Prénoms A-Z", "Prénoms Z-A", "Noms A-Z", "Noms Z-A"]
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''
            
            TextInput:
                id: list_search
                hint_text: "Chercher"
                color: (5/255, 5/255, 5/255, 1)
                font_size: self.height/2
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                on_text: root.search()

        BoxLayout:
            orientation:"vertical"
            cols: 1

            StackLayout:
                orientation: "lr-tb"
                cols: 3
                padding: [root.width/7, root.height/7, root.width/7, root.height/7]
                spacing: [root.width/3.5, root.height/5]

                Label:
                    id: trombi_stud
                    text: "Michel Blanc"
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    width: root.width/30
                    height: root.height/25

                    Label:
                        id: trombi_stud_year
                        text: "1A"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: self.parent.font_size
                        pos: (self.parent.x - (root.width/15), self.parent.y - (root.height/40))
                        size_hint: (None, None)
                        height: root.height/80
                        width: root.width/6

                    Image:
                        id: trombi_stud_pic
                        source: "assets/profile.png"
                        pos: (self.parent.x - (root.width/15), self.parent.y + (root.height/20))
                        size_hint: (None, None)
                        height: root.height/80*10
                        width: root.width/6
                        allow_stretch: True
                
                Label:
                    id: trombi_stud
                    text: "Quentin DELCHIAPPO"
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    width: root.width/30
                    height: root.height/25

                    Label:
                        id: trombi_stud_year
                        text: "2A"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: self.parent.font_size
                        pos: (self.parent.x - (root.width/15), self.parent.y - (root.height/40))
                        size_hint: (None, None)
                        height: root.height/80
                        width: root.width/6

                    Image:
                        id: trombi_stud_pic
                        source: "assets/snap.jpg"
                        pos: (self.parent.x - (root.width/15), self.parent.y + (root.height/20))
                        size_hint: (None, None)
                        height: root.height/80*10
                        width: root.width/6
                        allow_stretch: True

                Label:
                    id: trombi_stud
                    text: "Gilbert Montagné"
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    width: root.width/30
                    height: root.height/25

                    Label:
                        id: trombi_stud_year
                        text: "2A"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: self.parent.font_size
                        pos: (self.parent.x - (root.width/15), self.parent.y - (root.height/40))
                        size_hint: (None, None)
                        height: root.height/80
                        width: root.width/6

                    Image:
                        id: trombi_stud_pic
                        source: "assets/profile.png"
                        pos: (self.parent.x - (root.width/15), self.parent.y + (root.height/20))
                        size_hint: (None, None)
                        height: root.height/80*10
                        width: root.width/6
                        allow_stretch: True

                Label:
                    id: trombi_stud
                    text: "Jean Pierre"
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    width: root.width/30
                    height: root.height/25

                    Label:
                        id: trombi_stud_year
                        text: "1A"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: self.parent.font_size
                        pos: (self.parent.x - (root.width/15), self.parent.y - (root.height/40))
                        size_hint: (None, None)
                        height: root.height/80
                        width: root.width/6

                    Image:
                        id: trombi_stud_pic
                        source: "assets/profile.png"
                        pos: (self.parent.x - (root.width/15), self.parent.y + (root.height/20))
                        size_hint: (None, None)
                        height: root.height/80*10
                        width: root.width/6
                        allow_stretch: True

                Label:
                    id: trombi_stud
                    text: "Jean Pierre"
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    width: root.width/30
                    height: root.height/25

                    Label:
                        id: trombi_stud_year
                        text: "1A"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: self.parent.font_size
                        pos: (self.parent.x - (root.width/15), self.parent.y - (root.height/40))
                        size_hint: (None, None)
                        height: root.height/80
                        width: root.width/6

                    Image:
                        id: trombi_stud_pic
                        source: "assets/profile.png"
                        pos: (self.parent.x - (root.width/15), self.parent.y + (root.height/20))
                        size_hint: (None, None)
                        height: root.height/80*10
                        width: root.width/6
                        allow_stretch: True


#Fenêtre pour l'ajout d'un étudiant dans la bdd
<Add>:

    name: "Add"

    BoxLayout:
        cols: 1
        orientation: "vertical"
        spacing: root.height/50

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]

                Button:
                    text: "Retour"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "NavigProf"

                Label:
                    text: "Quel étudiant ajouter ? "
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            spacing: root.height/50
            height: root.height/4.5

            TextInput:
                id: surname_etu
                hint_text: "Prénom"
                multiline: False
                size_hint: (.7, None)
                height: root.height/18
                font_size: root.width/24
                pos_hint: {'center_x':.5, 'center_y':.45}
                halign: 'center'
                valign: 'center'

            TextInput:
                id: name_etu
                hint_text: "Nom"
                multiline: False
                size_hint: (.7, None)
                height: root.height/18
                font_size: root.width/24
                pos_hint: {'center_x':.5, 'center_y':.4}
                halign: 'center'
                valign: 'middle'

            TextInput:
                id: age_etu
                hint_text: "Age"
                multiline: False
                size_hint: (.7, None)
                height: root.height/18
                font_size: root.width/24
                pos_hint: {'center_x':.5, 'center_y':.4}
                halign: 'center'
                valign: 'middle'

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/8

            Label:
                text: "Matière"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                size_hint: (.5, .3)
                pos_hint: {'center_x':.5, 'center_y':.3}

            Spinner:
                id: subject_choice
                text: "Matière ?"
                font_size: root.width/24
                values: ["Réseau", "Prog", "Web", "Maths", "Physique"]
                size_hint: (.7, None)
                height: root.height/18
                pos_hint: {'center_x': 0.5, 'center_y':1}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''

        TextInput:
            id: moyenne
            hint_text: "Moyenne correspondante"
            multiline: False
            size_hint: (.7, None)
            height: root.height/18
            font_size: root.width/24
            pos_hint: {'center_x':.5, 'center_y':.45}
            halign: 'center'
            valign: 'center'

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/8

            Label:
                text: "Année d'enseignement"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                size_hint: (.5, .3)
                pos_hint: {'center_x':.5, 'center_y':.3}

            Spinner:
                id: year_choice
                text: "Année ?"
                font_size: root.width/24
                values: ["1A", "2A"]
                size_hint: (.7, None)
                height: root.height/18
                pos_hint: {'center_x': 0.5, 'center_y':1}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''
        
        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/8

            Label:
                text: "Photo de l'étudiant"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                size_hint: (.5, .3)
                pos_hint: {'center_x':.5, 'center_y':.45}

            Button:
                id: picture_add
                text: "Cliquez ou glissez la photo ici"
                multiline: False
                size_hint: (.7, None)
                height: root.height/18
                font_size: root.width/24
                pos_hint: {'center_x':.5, 'center_y':.45}
                halign: 'center'
                valign: 'center'
                on_release: root.file_chooser()

        BoxLayout:
            cols: 1
            orientation: "vertical"
            padding: [0, 0, 0, root.height/30]
            
            Button:
                id: add_stud
                text: "Soumettre"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.35, None)
                height: root.height/18
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos 
                #on_release: root.add_student()


#Fenêtre qui permet de voir et modifier un étudiant
<StudentView>:

    name: "StudentView"

    BoxLayout:
        cols: 6
        orientation: "vertical"
        spacing: root.height/30

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]
                size_hint: (1, None)
                height: root.height/15

                Button:
                    text: "Retour"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "NavigProf"

                Label:
                    text: "Voir/Modifier un étudiant"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}
            
        BoxLayout:
            orientation:"horizontal"
            cols: 2
            spacing: root.width/20
            size_hint: (1, None)
            height: root.height/40
            padding: [root.width/35, 0, 0, 0]

            Spinner:
                id: stud_view_sort_by
                text: "Chercher étudiant"
                font_size: self.width/10
                values: ["Quentin DELCHIAPPO", "Jean PIERRE", "Charles ROY"]
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''

        BoxLayout:
            orientation: "vertical"
            cols: 2
            padding: [root.width/35, 0, 0, 0]

            Image:
                id: stud_view_picture
                source: "assets/profile.png"
                size_hint: (None, None)
                height: self.parent.height
                width: self.parent.width/9
                allow_stretch: True
        
        StackLayout:
            orientation: "lr-tb"
            cols: 1
            id: stud_view_titles_stack
            size_hint: (1, None)
            height: root.height/20
            padding: [root.width/25, root.height/50, root.width/25, 0]

            GridLayout:
                cols: 7
                id: stud_view_titles
                size_hint: (None, None)
                width: root.width/1.1
                height: root.height/20
                spacing: root.width/20
                padding: [root.width/25, 0, 0, 0]
                canvas.before:
                    Color:
                        rgba: 39/255, 189/255, 245/255, .42
                    Rectangle:
                        size: self.size
                        pos: self.pos

                Label:
                    id: stud_view_title_subject
                    text: "Matière"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/10

                Label:
                    id: stud_view_title_moy
                    text: "Moyenne étudiant"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/4
                
                Label:
                    id: stud_view_title_best_moy
                    text: "Moyenne Générale"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/4
                
                Label:
                    id: stud_view_title_action
                    text: "Action"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/6

        ScrollView:
            StackLayout:
                orientation: "lr-tb"
                cols: 1
                id: stud_view_moys
                size_hint: (1, None)
                height: self.minimum_height
                padding: [root.width/25, 0, root.width/25, root.height/50]
                spacing: [root.width/20, root.height/100]

                GridLayout:
                    cols: 7
                    id: stud_view_moy
                    size_hint: (None, None)
                    width: root.width/1.1
                    height: root.height/20
                    spacing: root.width/20
                    padding: [root.width/25, 0, 0, 0]
                    canvas.before:
                        Color:
                            rgba: 199/255, 199/255, 199/255, .58
                        Rectangle:
                            size: self.size
                            pos: self.pos
                    
                        
                    Label:
                        id: stud_view_moy_subject
                        text: "Prog"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/10

                    Label:
                        id: stud_view_moy_moy
                        text: "15.2"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/4
                    
                    Label:
                        id: stud_view_moy_best_moy
                        text: "19.5"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/4
                    
                    BoxLayout:
                        orientation: "vertical"
                        rows: 1
                        padding: [0, 0, 0, root.width/90]
                        size_hint: (1, None)
                        height: root.height/30

                        Button:
                            id: stud_view_moy_modify
                            text: "Modifier"
                            size_hint: (None, None)
                            height: self.parent.height
                            width: root.width/6
                            font_size: root.width/35
                            background_color: 233/255, 12/255, 12/255, 0.8
                            canvas.before:
                                Color:
                                    rgba: self.background_color
                                RoundedRectangle:
                                    size: self.size
                                    pos: self.pos
                            on_release: root.moy_modify()

                GridLayout:
                    cols: 7
                    id: stud_view_moy
                    size_hint: (None, None)
                    width: root.width/1.1
                    height: root.height/20
                    spacing: root.width/20
                    padding: [root.width/25, 0, 0, 0]
                    canvas.before:
                        Color:
                            rgba: 199/255, 199/255, 199/255, .58
                        Rectangle:
                            size: self.size
                            pos: self.pos
                        
                    Label:
                        id: stud_view_moy_subject
                        text: "Web"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/10

                    Label:
                        id: stud_view_moy_moy
                        text: "17.3"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/4
                    
                    Label:
                        id: stud_view_moy_best_moy
                        text: "18.6"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/4
                    
                    BoxLayout:
                        orientation: "vertical"
                        rows: 1
                        padding: [0, 0, 0, root.width/90]
                        size_hint: (1, None)
                        height: root.height/30

                        Button:
                            id: stud_view_moy_modify
                            text: "Modifier"
                            size_hint: (None, None)
                            height: self.parent.height
                            width: root.width/6
                            font_size: root.width/35
                            background_color: 233/255, 12/255, 12/255, 0.8
                            canvas.before:
                                Color:
                                    rgba: self.background_color
                                RoundedRectangle:
                                    size: self.size
                                    pos: self.pos
                            on_release: root.moy_modify()



#Fenêtre qui permet d'afficher la liste des étudiants
<Liste>:

    name: "Liste"

    BoxLayout:
        cols: 6
        orientation: "vertical"
        spacing: root.height/30

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]
                size_hint: (1, None)
                height: root.height/15

                Button:
                    text: "Retour"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "NavigProf"

                Label:
                    text: "Liste des étudiants"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}
            
        BoxLayout:
            orientation:"horizontal"
            cols: 2
            spacing: root.width/20
            size_hint: (1, None)
            height: root.height/40
            padding: [root.width/35, 0, 0, 0]

            Spinner:
                id: list_sort_by
                text: "Trier par"
                font_size: root.width/24
                values: ["1A", "2A", "Prénoms A-Z", "Prénoms Z-A", "Noms A-Z", "Noms Z-A"]
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''
            
            TextInput:
                id: list_search
                hint_text: "Chercher"
                color: (5/255, 5/255, 5/255, 1)
                font_size: self.height/2
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                on_text: root.search()

        StackLayout:
            orientation: "lr-tb"
            cols: 1
            id: stud_list_titles_stack
            size_hint: (1, None)
            height: root.height/20
            padding: [root.width/25, root.height/50, root.width/25, 0]

            GridLayout:
                cols: 7
                id: stud_list_titles
                size_hint: (None, None)
                width: root.width/1.1
                height: root.height/20
                spacing: root.width/20
                padding: [root.width/25, 0, 0, 0]
                canvas.before:
                    Color:
                        rgba: 39/255, 189/255, 245/255, .42
                    Rectangle:
                        size: self.size
                        pos: self.pos

                Label:
                    id: stud_list_title_surname
                    text: "Prénom"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/10

                Label:
                    id: stud_list_title_name
                    text: "Nom"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/6
                
                Label:
                    id: stud_list_title_age
                    text: "Age"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/20

                Label:
                    id: stud_list_title_year
                    text: "Année"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/50
                
                Label:
                    id: stud_list_title_subject
                    text: "Matière"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/7
                
                Label:
                    id: stud_list_title_moy
                    text: "Moyenne"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/50
                
                Label:
                    id: stud_list_title_picture
                    text: "Photo"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/9

        ScrollView:
            StackLayout:
                orientation: "lr-tb"
                cols: 1
                id: stud_lists
                size_hint: (1, None)
                padding: [root.width/25, 0, root.width/25, root.height/50]
                spacing: [root.width/20, root.height/100]
            
                GridLayout:
                    cols: 7
                    id: stud_list
                    size_hint: (None, None)
                    width: root.width/1.1
                    height: root.height/20
                    spacing: root.width/20
                    padding: [root.width/25, 0, 0, 0]
                    canvas.before:
                        Color:
                            rgba: 199/255, 199/255, 199/255, .58
                        Rectangle:
                            size: self.size
                            pos: self.pos
                        
                    Label:
                        id: stud_list_surname
                        text: "Quentin"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/10

                    Label:
                        id: stud_list_name
                        text: "DELCHIAPPO"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/6
                    
                    Label:
                        id: stud_list_title_age
                        text: "21"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/20

                    Label:
                        id: stud_list_title_year
                        text: "2A"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/50
                    
                    Label:
                        id: stud_list_title_subject
                        text: "Physique"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/7
                    
                    Label:
                        id: stud_list_title_moy
                        text: "17.3"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/35
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/50
                    
                    Image:
                        id: stud_list_title_picture
                        source: "assets/snap.jpg"
                        size_hint: (None, None)
                        height: self.parent.height
                        width: self.parent.width/9
                        allow_stretch: True