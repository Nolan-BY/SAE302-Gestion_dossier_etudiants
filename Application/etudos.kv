#:kivy 1.11

#Création de toutes les fenêtres qui seront utilisées
WindowManager:
    Login:
    NavigProf:
    Liste:
    Trombi:
    Add:
    StudentView:


<TrombiStud>:
    BoxLayout:
        cols: 1
        orientation: "vertical"
        id: trombi_stud
        size_hint: (None, None)
        spacing: root.width/20
        padding: [root.width/25, 0, 0, 0]

        Image:
            id: trombi_stud_pic
            source: "assets/profile.png"
            size_hint: (None, None)
            width: self.parent.width/5
            height: self.parent.height/5
            allow_stretch: True

        Label:
            id: trombi_stud_name
            text: "Quentin DELCHIAPPO"
            bold: True
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/25
            size_hint: (None, None)
            width: self.parent.width/5
            height: self.parent.height/40

        Label:
            id: trombi_stud_year
            text: "2A"
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/25
            size_hint: (None, None)
            height: self.parent.height/40
            width: self.parent.width/5


<ButtonGrid>:

<StudList>:
    ButtonGrid:
        cols: 7
        id: stud_list
        spacing: root.width/20
        padding: [root.width/25, 0, 0, 0]
        canvas.before:
            Color:
                rgba: 199/255, 199/255, 199/255, .58
            Rectangle:
                size: self.size
                pos: self.pos
        on_press: root.stud_choose()
            
        Label:
            id: stud_list_surname
            text: ""
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/10

        Label:
            id: stud_list_name
            text: ""
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/6
        
        Label:
            id: stud_list_age
            text: ""
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/10

        Label:
            id: stud_list_year
            text: ""
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/50
        
        Label:
            id: stud_list_global_moy
            text: ""
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/6
        
        Image:
            id: stud_list_picture
            source: ""
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/9
            allow_stretch: True


<EtuMoy>:
    GridLayout:
        cols: 7
        id: stud_view_moy
        spacing: root.width/20
        padding: [root.width/25, 0, 0, 0]
        canvas.before:
            Color:
                rgba: 199/255, 199/255, 199/255, .58
            Rectangle:
                size: self.size
                pos: self.pos
        
            
        Label:
            id: stud_view_moy_subject
            text: ""
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/10

        Label:
            id: stud_view_moy_moy
            text: ""
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/4
        
        Label:
            id: stud_view_moy_best_moy
            text: ""
            color: (5/255, 5/255, 5/255, 1)
            font_size: root.width/35
            size_hint: (None, None)
            height: self.parent.height
            width: self.parent.width/4
        
        BoxLayout:
            orientation: "vertical"
            rows: 1
            padding: [0, 0, 0, root.width/20]
            size_hint: (1, None)
            height: root.height/80

            Button:
                id: stud_view_moy_suppr
                text: "Supprimer"
                size_hint: (None, None)
                height: root.height/2.5
                width: root.width/6
                font_size: root.width/35
                background_color: 233/255, 12/255, 12/255, 0.8
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                on_release: root.moy_suppr()


#Fenêtre de login, avec la connexion du prof    
<Login>:
    name: "Login"

    BoxLayout:
        cols: 1
        orientation: "vertical"
        spacing: root.height/30

        Label:
            text: "BIENVENUE SUR LE SITE DE :"
            background_color: (26, 82, 118, 1)
            font_size: root.width/24
            pos_hint: {'center_x':.5, 'center_y':1}
            background_color: 39/255, 189/255, 245/255, .42
            color: (5/255, 5/255, 5/255, 1)
            canvas.before:
                Color:
                    rgba: self.background_color
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

        Image:
            source: "assets/rt.png"

        BoxLayout:
            orientation: "vertical"
            cols: 1

            Label:
                text: "Identifiez vous"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                size_hint: (.6, None)
                height: root.height/18
                pos_hint: {'center_x':.5, 'center_y':.95}
                background_color: 39/255, 189/255, 245/255, .42
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                        radius: [20]

        TextInput:
            id: connect_login
            input_type: "text"
            hint_text: "Identifiant"
            multiline: False
            size_hint: (.7, None)
            height: root.height/18
            font_size: root.width/24
            pos_hint: {'center_x':.5, 'center_y':.4, 'top' : .05}
            halign: 'center'
            valign: 'middle'
            on_cursor: root.reset_err_msg()

        TextInput:
            id: connect_mdp
            input_type: "text"
            hint_text: "Mot de passe"
            multiline: False
            password: True
            password_mask: "*"
            size_hint: (.7, None)
            height: root.height/18
            font_size: root.width/24
            pos_hint: {'center_x':.5, 'center_y':.45, 'top' : .05}
            halign: 'center'
            valign: 'center'
            on_cursor: root.reset_err_msg()
        
        Label:
            id: login_error
            text: ""
            bold: True
            color: (244/255, 18/255, 18/255, .8)
            font_size: root.width/24
            size_hint: (.6, None)
            height: root.height/18
            pos_hint: {'center_x':.5, 'center_y':.95}

        BoxLayout:
            orientation: "vertical"
            cols: 1
            padding: [0, 0, 0, root.height/25]
            
            Button:
                text: "Connexion !"
                id: connect_button
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.35, None)
                height: root.height/18
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos
                on_release: root.connect()


#Fenêtre de navigation, permet de choisir quelles options choisir   
<NavigProf>:

    name: "NavigProf"

    BoxLayout:
        cols: 1
        orientation: "vertical"
        spacing: root.height/20

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]

                Button:
                    text: "Logout"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "Login"

                Label:
                    text: "Vers où naviguer ?"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/7

            Image:
                source: "assets/rt.png"

        BoxLayout:
            orientation: "vertical"
            cols: 1
            spacing: root.height/20
            padding: [0, 0, 0, root.height/5]

            Button:
                text: "Liste des étudiants"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.55, None)
                height: root.height/10
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos 
                on_release: app.root.current = "Liste"
            
            # Button:
            #     text: "Trombinoscope"
            #     color: (5/255, 5/255, 5/255, 1)
            #     font_size: root.width/24
            #     background_color: 39/255, 189/255, 245/255, .42
            #     size_hint: (.55, None)
            #     height: root.height/10
            #     pos_hint: {'center_x':.5, 'center_y':.15}
            #     canvas.before:
            #         Color:
            #             rgba: self.background_color
            #         RoundedRectangle:
            #             size: self.size
            #             pos: self.pos 
            #     on_release: app.root.current = "Trombi"
            
            Button:
                text: "Ajouter un étudiant"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.55, None)
                height: root.height/10
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos 
                on_release: app.root.current = "Add"


#Fenêtre qui permet de voir la liste des photos des étudiants
<Trombi>:
    name: "Trombi"

    BoxLayout:
        cols: 6
        orientation: "vertical"
        spacing: root.height/30

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]
                size_hint: (1, None)
                height: root.height/15

                Button:
                    text: "Retour"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "NavigProf"

                Label:
                    text: "Trombinoscope"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}
            
        BoxLayout:
            orientation:"horizontal"
            cols: 2
            spacing: root.width/20
            size_hint: (1, None)
            height: root.height/40
            padding: [root.width/35, 0, 0, 0]

            Spinner:
                id: trombi_sort_by
                text: "Trier par"
                font_size: root.width/24
                values: ["1A", "2A", "Noms A-Z", "Noms Z-A", "Matières A-Z", "Matières Z-A"]
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''
            
            TextInput:
                id: trombi_search
                input_type: "text"
                hint_text: "Chercher"
                color: (5/255, 5/255, 5/255, 1)
                font_size: self.height/2
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                on_text: root.search()

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            StackLayout:
                orientation: "lr-tb"
                cols: 3
                id: trombi_studs
                size_hint: (1, None)
                padding: [root.width/20, 0, 0, 0]
                spacing: [root.width/20, root.height/20]


#Fenêtre pour l'ajout d'un étudiant dans la bdd
<Add>:

    name: "Add"

    BoxLayout:
        cols: 1
        orientation: "vertical"
        spacing: root.height/50

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]

                Button:
                    text: "Retour"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "NavigProf"

                Label:
                    text: "Quel étudiant ajouter ? "
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            spacing: root.height/50
            height: root.height/4.5

            TextInput:
                id: surname_etu
                hint_text: "Prénom"
                multiline: False
                size_hint: (.7, None)
                height: root.height/18
                font_size: root.width/24
                pos_hint: {'center_x':.5, 'center_y':.45}
                halign: 'center'
                valign: 'center'
                on_cursor: root.ids.add_etu_error.text = ''

            TextInput:
                id: name_etu
                hint_text: "Nom"
                multiline: False
                size_hint: (.7, None)
                height: root.height/18
                font_size: root.width/24
                pos_hint: {'center_x':.5, 'center_y':.4}
                halign: 'center'
                valign: 'middle'
                on_cursor: root.ids.add_etu_error.text = ''

            TextInput:
                id: age_etu
                input_filter: 'int'
                hint_text: "Age"
                multiline: False
                size_hint: (.7, None)
                height: root.height/18
                font_size: root.width/24
                pos_hint: {'center_x':.5, 'center_y':.4}
                halign: 'center'
                valign: 'middle'
                on_cursor: root.ids.add_etu_error.text = ''

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/8

            Label:
                text: "Matière"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                size_hint: (.5, .3)
                pos_hint: {'center_x':.5, 'center_y':.3}

            Spinner:
                id: subject_choice_etu
                text: "Matière ?"
                font_size: root.width/24
                values: ["Réseau", "Prog", "Web", "Maths", "Physique", "Anglais", "PPP"]
                size_hint: (.7, None)
                height: root.height/18
                pos_hint: {'center_x': 0.5, 'center_y':1}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''
                on_press: root.ids.add_etu_error.text = ''

        TextInput:
            id: moyenne_etu
            input_filter: 'float'
            hint_text: "Moyenne correspondante"
            multiline: False
            size_hint: (.7, None)
            height: root.height/18
            font_size: root.width/24
            pos_hint: {'center_x':.5, 'center_y':.45}
            halign: 'center'
            valign: 'center'
            on_cursor: root.ids.add_etu_error.text = ''

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/8

            Label:
                text: "Année d'enseignement"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                size_hint: (.5, .3)
                pos_hint: {'center_x':.5, 'center_y':.3}

            Spinner:
                id: year_choice_etu
                text: "Année ?"
                font_size: root.width/24
                values: ["1A", "2A"]
                size_hint: (.7, None)
                height: root.height/18
                pos_hint: {'center_x': 0.5, 'center_y':1}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''
                on_press: root.ids.add_etu_error.text = ''
        
        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/8

            Label:
                text: "Photo de l'étudiant"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                size_hint: (.5, .3)
                pos_hint: {'center_x':.5, 'center_y':.45}

            Button:
                id: picture_add_etu
                text: "Cliquez ou glissez la photo ici"
                multiline: False
                size_hint: (.7, None)
                height: root.height/18
                font_size: root.width/24
                pos_hint: {'center_x':.5, 'center_y':.45}
                halign: 'center'
                valign: 'center'
                on_release: root.file_chooser()
                on_press: root.ids.add_etu_error.text = ''
            
        Label:
            id: add_etu_error
            text: ""
            bold: True
            color: (244/255, 18/255, 18/255, .8)
            font_size: root.width/24
            size_hint: (.6, None)
            height: root.height/18
            pos_hint: {'center_x':.5, 'center_y':.95}

        BoxLayout:
            cols: 1
            orientation: "vertical"
            padding: [0, 0, 0, root.height/30]
            
            Button:
                id: add_stud
                text: "Soumettre"
                color: (5/255, 5/255, 5/255, 1)
                font_size: root.width/24
                background_color: 39/255, 189/255, 245/255, .42
                size_hint: (.35, None)
                height: root.height/18
                pos_hint: {'center_x':.5, 'center_y':.15}
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        size: self.size
                        pos: self.pos 
                on_release: root.add_student()


#Fenêtre qui permet de voir et modifier un étudiant
<StudentView>:

    name: "StudentView"

    BoxLayout:
        cols: 6
        orientation: "vertical"
        spacing: root.height/30

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]
                size_hint: (1, None)
                height: root.height/15

                Button:
                    text: "Retour"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "Liste"

                Label:
                    text: "Voir/Modifier un étudiant"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}
        
        BoxLayout:
            orientation: "horizontal"
            cols: 2

            ButtonGrid:
                orientation: "vertical"
                cols: 1
                size_hint: (.6, 1)
                spacing: root.height/50
                padding: [root.width/35, 0, 0, 0]
                on_press: root.image_change()

                Image:
                    id: stud_view_picture
                    source: ""
                    size_hint: (None, None)
                    height: self.parent.height/1.6
                    width: self.parent.width/2
                    allow_stretch: True
                
                Label:
                    id: stud_view_infos
                    halign: "left"
                    text: ""
                    markup: True
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: self.parent.height/3
                    width: self.parent.width/1.2
                    font_size: root.width/24

            BoxLayout:
                orientation: "vertical"
                cols: 1
                size_hint: (.5, None)
                padding: [root.width/20, 0, root.width/10, root.height/9]
                spacing: root.height/40
                height: root.height/3

                BoxLayout:
                    orientation: "vertical"
                    cols: 1
                    spacing: root.height/80

                    Label:
                        text: "Ajouter une moyenne"
                        color: (5/255, 5/255, 5/255, 1)
                        font_size: root.width/24
                        size_hint: (.5, None)
                        height: root.height/20
                        pos_hint: {'center_x':.55}

                    Spinner:
                        id: stud_view_subject_choice_etu
                        text: "Matière ?"
                        font_size: root.width/24
                        values: ["Réseau", "Prog", "Web", "Maths", "Physique", "Anglais", "PPP"]
                        size_hint: (None, None)
                        height: root.height/18
                        width: root.width/3
                        border: 1,1,1,1
                        background_color: 58/255, 140/255, 153/255, .8
                        background_normal: ''
                        background_down: ''

                    TextInput:
                        id: stud_view_moyenne_etu
                        input_filter: 'float'
                        hint_text: "Moyenne"
                        multiline: False
                        size_hint: (None, None)
                        height: root.height/18
                        width: root.width/3
                        font_size: root.width/24
                        halign: 'center'
                        valign: 'center'
                    
                    Label:
                        id: stud_view_moy_error
                        text: ""
                        bold: True
                        color: (244/255, 18/255, 18/255, .8)
                        font_size: root.width/24
                        size_hint: (.5, None)
                        height: root.height/50
                        pos_hint: {'center_x':.55}

                Button:
                    text: "Ajouter"
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    size_hint: (None, None)
                    height: root.height/18
                    width: root.width/3
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos 
                    on_release: root.add_moy()
        
        StackLayout:
            orientation: "lr-tb"
            cols: 1
            id: stud_view_titles_stack
            size_hint: (1, None)
            height: root.height/20
            padding: [root.width/25, root.height/50, root.width/25, 0]

            GridLayout:
                cols: 7
                id: stud_view_moy_titles
                size_hint: (None, None)
                width: root.width/1.1
                height: root.height/20
                spacing: root.width/20
                padding: [root.width/25, 0, 0, 0]
                canvas.before:
                    Color:
                        rgba: 39/255, 189/255, 245/255, .42
                    Rectangle:
                        size: self.size
                        pos: self.pos

                Label:
                    id: stud_view_moy_title_subject
                    text: "Matière"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/10

                Label:
                    id: stud_view_moy_title_moy
                    text: "Moyenne étudiant"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/4
                
                Label:
                    id: stud_view_moy_title_best_moy
                    text: "Meilleure moyenne"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/4
                
                Label:
                    id: stud_view_moy_title_action
                    text: "Action"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/6

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            StackLayout:
                orientation: "lr-tb"
                cols: 1
                id: stud_view_moys
                size_hint: (1, None)
                padding: [root.width/25, 0, root.width/25, root.height/50]
                spacing: [root.width/20, root.height/100]


#Fenêtre qui permet d'afficher la liste des étudiants
<Liste>:

    name: "Liste"

    BoxLayout:
        cols: 6
        orientation: "vertical"
        spacing: root.height/30

        BoxLayout:
            orientation: "vertical"
            cols: 1
            size_hint: (1, None)
            height: root.height/15
            canvas.before:
                Color:
                    rgba: 39/255, 189/255, 245/255, .42
                RoundedRectangle:
                    size: self.size
                    pos: self.pos

            BoxLayout:
                orientation:"horizontal"
                rows: 1
                padding: [root.width/35, 0, 0, 0]
                size_hint: (1, None)
                height: root.height/15

                Button:
                    text: "Retour"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/5
                    pos_hint: {'center_x':.0, 'center_y':.5}
                    font_size: root.width/24
                    background_color: 39/255, 189/255, 245/255, .42
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            size: self.size
                            pos: self.pos
                    on_release: app.root.current = "NavigProf"

                Label:
                    text: "Liste des étudiants"
                    color: (5/255, 5/255, 5/255, 1)
                    size_hint: (None, None)
                    height: root.height/20
                    width: root.width/1.7
                    font_size: root.width/24
                    pos_hint: {'center_x':.0, 'center_y':.5}
            
        BoxLayout:
            orientation:"horizontal"
            cols: 2
            spacing: root.width/20
            size_hint: (1, None)
            height: root.height/40
            padding: [root.width/35, 0, 0, 0]

            Spinner:
                id: list_sort_by
                text: "Trier par"
                font_size: root.width/24
                values: ["1A", "2A", "Prénoms A-Z", "Prénoms Z-A", "Noms A-Z", "Noms Z-A", "Age >", "Age <", "Moyenne G >", "Moyenne G <"]
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                border: 1,1,1,1
                background_color: 58/255, 140/255, 153/255, .8
                background_normal: ''
                background_down: ''
                on_text: root.populate()
            
            TextInput:
                id: list_key_search
                hint_text: "Chercher"
                color: (5/255, 5/255, 5/255, 1)
                font_size: self.height/2
                size_hint: (None, None)
                width: root.width/3
                height: root.height/25
                pos_hint: {'center_x':.2, 'center_y':.5}
                on_text: root.populate()

        StackLayout:
            orientation: "lr-tb"
            cols: 1
            id: stud_list_titles_stack
            size_hint: (1, None)
            height: root.height/20
            padding: [root.width/25, root.height/50, root.width/25, 0]

            GridLayout:
                cols: 7
                id: stud_list_titles
                size_hint: (None, None)
                width: root.width/1.1
                height: root.height/20
                spacing: root.width/20
                padding: [root.width/25, 0, 0, 0]
                canvas.before:
                    Color:
                        rgba: 39/255, 189/255, 245/255, .42
                    Rectangle:
                        size: self.size
                        pos: self.pos

                Label:
                    id: stud_list_title_surname
                    text: "Prénom"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/10

                Label:
                    id: stud_list_title_name
                    text: "Nom"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/6
                
                Label:
                    id: stud_list_title_age
                    text: "Age"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/10

                Label:
                    id: stud_list_title_year
                    text: "Année"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/50
                
                Label:
                    id: stud_list_title_moy
                    text: "Moyenne G"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/6
                
                Label:
                    id: stud_list_title_picture
                    text: "Photo"
                    bold: True
                    color: (5/255, 5/255, 5/255, 1)
                    font_size: root.width/35
                    size_hint: (None, None)
                    height: self.parent.height
                    width: self.parent.width/9

        ScrollView:
            do_scroll_x: False
            do_scroll_y: True
            StackLayout:
                orientation: "lr-tb"
                cols: 1
                id: stud_lists
                size_hint: (1, None)
                padding: [root.width/25, 0, root.width/25, root.height/50]
                spacing: [root.width/20, root.height/100]